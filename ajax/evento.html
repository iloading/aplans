<script>
  function mostrarEvento(idEvento) {
    var query = "idEvento=" + idEvento;

    $.ajax({
      // ajax call starts
      url: "scripts/sc_evento.php",
      dataType: "json", // Choosing a JSON datatype
      type: "GET",
      data: query,
    }).done(function (data) {
      $("#conteudoPagina").html(""); //limpa o conteúdo

      

      var evento =
        '<div class="w-100 d-flex flex-column"> <div class="position-fixed" style="width: inherit; background-color: #F1F3F6; z-index:2" id="navCompleta"><article class="container d-flex flex-column pl-3 pr-3 pt-4 pb-4" style="max-width:inherit; background: linear-gradient(#BAEC 2%, transparent 105%);" id="nav"><div class="d-flex flex-column show" id="nav_grande"> <div class="d-flex justify-content-between" id="organizador"> <div class="d-flex align-items-center"> <img style="width: 1.1rem; height:1.1rem" src="images/others/back.png"> </div> <div class="d-flex"><span class="pl-2 pr-2 pt-1 pb-1" style="background-color: rgba(109, 63, 230, 0.2); border-radius: 20px; color: #6F41E9; font-weight: 500;">Organizador</span> <div class="d-flex align-items-center pl-2"> <img style="width: 1.5rem; height:1.5rem" src="images/settings/gear.png"> </div></div> </div> <div class="d-flex justify-content-center" id="imagem"> <div class="avatar-circular mt-2 d-flex"> <img src="assets/avatar.png"> </div> </div> <div class="d-flex justify-content-center" id="titulo"> <h3 class="font-weight-bold text-azul-aplans">Outdoor Cinema</h3> </div> <div class="d-flex justify-content-center" id="data_evento"> <p class="text-secondary">10 pm, august 4, 2020</p> </div> <div class="d-flex justify-content-center" id="botoes_evento"> <button type="button" class="botaoParticipar">+ Participar</button> <button type="button" class="botaoAbandonar">- Abandonar</button> </div> </div><div class="align-items-center hide" id="nav_pequena"><div class="d-flex align-items-center pr-3"> <img style="width: 1.1rem; height:1.1rem" src="images/others/back.png"> </div> <div class="d-none justify-content-between" id="organizador"> <span class="pl-2 pr-2 pt-1 pb-1" style="background-color: rgba(109, 63, 230, 0.2); border-radius: 20px; color: #6F41E9; font-weight: 500;">Organizador</span> <div class="pl-4 d-flex align-items-center"> <img style="width: 1.5rem; height:1.5rem" src="images/settings/gear.png"> </div> </div> <div class="d-flex justify-content-center" id="imagem"> <div class="avatar-circular d-flex"> <img src="assets/avatar.png"> </div> </div> <div class="d-flex flex-column pl-3 justify-items-center"> <div id="titulo"> <h4 class="font-weight-bold text-azul-aplans">Outdoor Cinema</h4> </div> <div id="data_evento"> <span class="text-secondary">10 pm, august 4, 2020</span> </div> </div> <div class="d-none justify-content-center" id="botoes_evento"> <button type="button" class="botaoParticipar">+ Participar</button> <button type="button" class="botaoAbandonar">- Abandonar</button> </div> </div></article><div id="navegacao"> <button class="tablink" id="defaultOpen" style="font-size:1.2rem;">Home</button> <button class="tablink" style="font-size:1.2rem;">Pessoas</button> <button class="tablink" style="font-size:1.2rem;">Tarefas</button> <button class="tablink" style="font-size:1.2rem;">Chat</button></div> </div> <div class="w-100 pt-3" id="margem_conteudo"> <div id="Home" class="tabcontent container-fluid"> <h5 class="font-weight-bold ml-2">Descrição</h5> <p class="descricaoFont pt-1 ml-2">Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo qui voluptatum maiores debitis vel maxime architecto beatae dolorum, assumenda ab! Suscipit saepe qui soluta nemo sint praesentium doloremque provident dicta.</p> <div class="ml-2 mr-2 marginT"> <h5 class="font-weight-bold">Participantes</h5> <div id="myProgressHome1"> <div id="myBarHome1"></div> </div> </div> <div class="container-fluid pt-2"> <div class="row"> <div class="col-6"> <h6 class="pt-2 font-weight-bold" style="color:grey;">8/10</h6> </div> <div class="col-6 d-flex align-items-center" style="justify-content: flex-end"> <a href="#" class="font-weight-bold" style="font-size: 1rem;text-decoration: none;color:grey;font-style:bold;">Ver mais +</a> </div> </div> </div> <div class=" ml-2 marginT"> <h5 class="font-weight-bold">Tarefas Restantes</h5> </div> <div class="container-fluid p-4"> <div class="row"> <div class="col-8 mainTasks"> <p class="pb-1 pt-2 m-0 font-weight-bold">Projetor</p> <span class="text-muted m-0 pb-2">Trazer o projector man</span> </div> <div class="col-4 d-flex align-items-center justify-content-end"> <div class="form-check text-right"> <input class="selectSize" type="checkbox" value="" id="defaultCheck1"> </div> </div> </div> </div><div class="container-fluid p-4"> <div class="row"> <div class="col-8 mainTasks"> <p class="pb-1 pt-2 m-0 font-weight-bold">Projetor</p> <span class="text-muted m-0 pb-2">Trazer o projector man</span> </div> <div class="col-4 d-flex align-items-center justify-content-end"> <div class="form-check text-right"> <input class="selectSize" type="checkbox" value="" id="defaultCheck1"> </div> </div> </div> </div><div class="posicao_seta" id="girar_seta"><img class="arrow"src="images/others/down.png"></div></div> <div id="Pessoas" class="tabcontent container-fluid"> <div class="d-flex flex-wrap"> <div class="text-center w-25"> <div class="main-pessoas"> <img src="images/tipos_evento/Vector.png" class="w-50"> </div> <p>ola</p> </div> <div class="text-center w-25"> <div class="main-pessoas"> <img src="images/tipos_evento/Vector.png" class="w-50"> </div> <p>ola</p> </div> <div class="text-center w-25"> <div class="main-pessoas"> <img src="images/tipos_evento/Vector.png" class="w-50"> </div> <p>ola</p> </div> <div class="text-center w-25"> <div class="main-pessoas"> <img src="images/tipos_evento/Vector.png" class="w-50"> </div> <p>ola</p> </div> <div class="text-center w-25"> <div class="main-pessoas"> <img src="images/tipos_evento/Vector.png" class="w-50"> </div> <p>ola</p> </div> </div><div class="posicao_seta" id="girar_seta2"><img class="arrow"src="images/others/down.png"></div></div><div id="Tarefas" class="tabcontent container-fluid"><div class="d-flex align-items-center"> <h5 class="font-weight-bold ml-2">6 Tarefas</h5> <div class="p-0 d-flex align-items-center justify-content-end ml-auto"> <button type="button" class="p-1" style="border: 2px; border-style: dashed; border-color: #6F41E9; border-radius: 10px; width: 2.5rem; height: 2.5rem;"><img src="images/people/plus.png" width="15" height="15"></button> </div> </div><div class="container-fluid pl-4 pt-4 pb-4 pr-0 "> <div class="row"> <div class="col-8 mainTasks"><p class="pb-1 pt-2 m-0  font-weight-bold">Projetor</p> <p class="text-muted m-0 pb-2">Trazer o projector man</p> </div> <div class="col-4 d-flex align-items-center justify-content-end"> <div class="form-check text-right"> <input class="selectSize" type="checkbox" value="" id="defaultCheck1"> </div> </div> </div> </div><div class="posicao_seta" id="girar_seta3"><img class="arrow"src="images/others/down.png"></div></div> <div id="Chat" class="tabcontent container-fluid pt-0 pl-3 pr-3"> <ul class="container-fluid p-0"> <div class="row mt-4 d-flex align-items-center"> <div class=" avatar-circular-chat ml-3 mr-2"> <img src="images/people/avatar4.jpg"> </div> <li class="him">Como é que estão todos?</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-2 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">Pronto para a festa!</li> </div> <div class="row mt-4 d-flex align-items-center"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="images/people/avatar3.jpg"> </div> <li class="him">Qual é o filme? Tenho uma sugestão!</li> </div> <div class="row mt-4 d-flex align-items-center"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="images/people/avatar2.jpg"> </div> <li class="him">Pipocas Doces ou Salgadas</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">Pipocas doces FOSHOU</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> <div class="row mt-4 d-flex align-items-center flex-row-reverse"> <div class=" avatar-circular-chat ml-3 mr-4"> <img src="assets/avatar.png"> </div> <li class="me">LMAO</li> </div> </ul> <div style="position: relative; bottom: 0; width: 100%;"> <hr> <div class="pl-3 pr-3 pb-3 pt-0 d-flex align-items-center justify-content-left ml-auto"> <input type="text" placeholder="Escreve algo" class="p-1" style="border: none; border-radius: 20px; font-size: 1rem; width: 100rem; height: 3rem;"> </div> </div> </div> </div>';

      $("#conteudoPagina").append(evento);
      

      $(document).ready(function () {
        
        /*Quando a função acaba, seleciona a tab escolhida por deafult que neste caso é a Home*/
        $("#defaultOpen").trigger("click");
        margem();
        /*Quando a função acaba, deteta qual é o tamanho da nav e atribui a respetiva margem top ao conteudo*/

        window.onscroll = function () {
          //console.log($(window).scrollTop());
          scrollFunction();
          
        };


        /*FUNÇOES USADAS QUANDO A PAGINA DE EVENTO É CARREGADA*/

        function margem() {
          tamanhoJanela = $(window).height();
          tamanhoNav = $("#navCompleta").height();
          tamanhoDisponivel = tamanhoJanela - tamanhoNav;
          tamanhoConteudo = $("#margem_conteudo").height();
          margemTop = tamanhoNav + "px";

          /*PROBLEMA DE 10H resolvido, se a height do conteudo ficar menor do que a área disponivel, depois de ter sido colapsada a nav, essa height é forçada a ser 1px maior que a área disponivel e, desta forma, força o scroll da página, o que permite que se obtenha o resultado pretendido*/
          if (tamanhoDisponivel > tamanhoConteudo) {
            tamanhoNovoConteudo = tamanhoDisponivel + 1 + "px";
            $("#margem_conteudo").css("height", tamanhoNovoConteudo);
            // console.log("Novo:" + tamanhoNovoConteudo);
          }
          /*Ajusta a margem do conteudo, consoante o tamanho da nav*/
          $("#margem_conteudo").css("margin-top", margemTop);
        }

        function scrollFunction() {
        /*se o utilizador fizer scroll*/
          if ($(window).scrollTop() > 0) {
            /*A nav é formatada de uma maneira diferente, escondendo alguns elementos*/
            // $("#margem_conteudo").removeClass("margemConteudo").addClass("margemConteudoColapsado");

            $("#girar_seta").addClass("girar_seta");
            $("#girar_seta2").addClass("girar_seta");
            $("#girar_seta3").addClass("girar_seta");


            $("#nav_grande").removeClass("show").addClass("animacao2");
            
            
            /*animacao a abrir nav pequena*/
            setTimeout(() => {
              $("#nav_grande").addClass("hide").removeClass("d-flex");
              $("#nav_pequena").removeClass("hide animacao").addClass("d-flex")
              margem();
                setTimeout(() => {
                  $("#nav_pequena").addClass("show");
                }, 50);

            }, 250);

        /*Quando o scroll voltar à posição original é reposta a nav inicial*/
          } else {
           

            $("#girar_seta").removeClass("girar_seta");
            $("#girar_seta2").removeClass("girar_seta");
            $("#girar_seta3").removeClass("girar_seta");
            
            /*animacao a abrir nav grande*/
            setTimeout(() => {

              $("#nav_pequena").removeClass("show").addClass("animacao");

              setTimeout(() => {
                $("#nav_pequena").removeClass("d-flex").addClass("hide");
                $("#nav_grande").removeClass("hide animacao2").addClass("d-flex");
                margem();
                  setTimeout(() => {
                        $("#nav_grande").addClass("show");
                  }, 50);
              }, 250);
            }, 250);

          }
        }
      });
    });
  }
</script>

<script>
  /*FUNCIONAMENTO DOS TAB CONTENTS QUE PERMITE NAVEGAR ENTRE AS 4 TABS*/
  $(document).on("click", ".tablink", function () {
     function margem() {
          tamanhoJanela = $(window).height();
          tamanhoNav = $("#navCompleta").height();
          tamanhoDisponivel = tamanhoJanela - tamanhoNav;
          tamanhoConteudo = $("#margem_conteudo").height();
          margemTop = tamanhoNav + "px";

          /*PROBLEMA DE 10H resolvido, se a height do conteudo ficar menor do que a área disponivel, depois de ter sido colapsada a nav, essa height é forçada a ser 1px maior que a área disponivel e, desta forma, força o scroll da página, o que permite que se obtenha o resultado pretendido*/
          if (tamanhoDisponivel > tamanhoConteudo) {
            tamanhoNovoConteudo = tamanhoDisponivel + 1 + "px";
            $("#margem_conteudo").css("height", tamanhoNovoConteudo);
            // console.log("Novo:" + tamanhoNovoConteudo);
          }
          /*Ajusta a margem do conteudo, consoante o tamanho da nav*/
          $("#margem_conteudo").css("margin-top", margemTop);
        }
        margem()
    
    // Hide all elements with class="tabcontent" by default */
    var i, tabcontent, tablinks, pageName;

    /*Transforma o nome do elemento em id ex(Ao clicar no botão Pessoas, mostra a div que tem o id Pessoas)*/
    pageName = String("#" + $(this).html());

    tabcontent = $(".tabcontent");
    tablinks = $(".tablink");

    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }

    // Remove todos os font weight's para apenas ficar selecionado o atual
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].style.fontWeight = "";
    }
    // Mostra o conteudo da tab em que clicámos
    $(pageName).css("display", "block");

    // Por a bold a tab em que estamos
    this.style.fontWeight = "bold";
  });
</script>
