<script>
    function mostrarHome() {
         
        $.ajax({ // ajax call starts
            url: 'scripts/sc_home.php',
            dataType: 'json', // Choosing a JSON datatype
            
        })
        
        .done(function (data) {
            $('#conteudoPagina').html(''); //limpa o conte√∫do da tabela
           console.log(data);

           var eventosCriados = '';
           var indicators = '';
           var upcoming = '';
           var cardsAmigos ='';
           var listaAmigos= '';
           var listaPlanos = '';

            console.log(data.created[0]);
            if (data.created[0] != 'vazio'){
                for (let i = 0; i < data.created.length; i++) {
                    //Se for o primeiro tem de estar active
                    if (i == 0) {
                        eventosCriados += '<div id="' + data.created[i]["id_evento"] + '" class="carousel-item active btn-evento"> <div class="events container-fluid"> <div class="row"> <p class="col-12">' + data.created[i]["nomeEventoCriado"] + '</p> <p class="col-12 data_evento">' + data.created[i]["diaEventoCriado"] + '</p> <p class="col-12 data_evento">' + data.created[i]["horaEventoCriado"] + '</p></div> </div> </div>';
                        indicators += '<li class="active" data-target="#carouselExampleIndicators1" data-slide-to="'+i+'"></li>'
                    }else{
                        eventosCriados += '<div id="' + data.created[i]["id_evento"] + '" class="carousel-item btn-evento"> <div class="events container-fluid"> <div class="row"> <p class="col-12">' + data.created[i]["nomeEventoCriado"] + '</p> <p class="col-12">' + data.created[i]["dataEventoCriado"] + '</p> </div> </div> </div>';
                        indicators += '<li data-target="#carouselExampleIndicators1" data-slide-to="' + i + '"></li>';
                    }
                        
                }
            }
            

            for (let i = 0; i < data.upcoming.length; i++) {
                if (i < 8) {
                    upcoming += ' <div id="' + data.upcoming[i]["id_evento"] + '" class="col-3 text-center btn-evento"> <div class="add-event"><img src="images'+ data.upcoming[i]["icon_tipo"] +'" class="w-50"></div> <p>'+ data.upcoming[i]["nome_evento"]+'</p> </div>';
                }

                 listaPlanos += '';
              
            }

            for (let i = 0; i < data.amigos.length; i++) {

                if(i<3){
                    cardsAmigos += '<div class="events container-fluid p-0" style="height: 16vh; max-width:30%;"> <div class="row d-flex justify-content-center"><div><img class="avatar-circular-amigos" src="images' + data.amigos[i]["imagem_amigo"] +'" alt="user"></div><p class="col-12 pt-2">' + data.amigos[i]["nomesAmigos"] + '</p></div> </div> ';

                }

                listaAmigos +=' <div class="container"> <div class="row"> <div class="col-3 d-flex justify-content-center p-0"> <div class="pb-2 pt-2"> <img class="avatar-circular" src="images' + data.amigos[i]["imagem_amigo"] +'" alt="user"> </div> </div> <div class="col-4 p-0 d-flex align-items-center"> <p class="m-0"><a href="#" class="text-dark">' + data.amigos[i]["nomesAmigos"] + '</a></p> </div> <div class="col-5 d-flex align-items-center justify-content-end"><img src="images/profile/more.png" class="w-25"></div> </div> </div><hr>';

                 //listaAmigos += '<div class="row mb-4 pt-3 pb-3" > <div class="pl-0 pt-2 pb-4 pr-0 ml-5 d-flex align-items-center col-2"> <div class=" avatar-circular"><img src="images' + data.amigos[i][" imagem_amigo"] +'"> </div> </div> <div class="pl-3 d-flex align-items-center col-9"> <div class="row"> <div class="col-12 pr-0"> <span class="display-4 font-weight-normal">' + data.amigos[i]["nomesAmigos"] + '</span></div> <h1 class="col-12 display-6 font-weight-light" style="margin-bottom: 8px;">Popcorn Dealer</h1> </div> </div> </div>';
                   
            }

    
            
            var home = '<main id="main" class="alturaMainLogin text-white bg-azul-aplans d-flex flex-column align-items-start"> <div class="container p-3"> <section class="row d-flex" style="align-items: center;"> <div class="col-6 text-left" style="height: 100%;"> <div class="div-logo"><a href="index.php"><img class="mw-100" src="assets/aplans.png" alt="logotipo"></a></div> </div> <div class="col-6 text-right dropdown" style="height:100%"> <div class="avatar-circular"><img  onclick="myFunction()" class="mw-100 dropbtn" src="assets/avatar.png" alt="avatar"></div> <div id="myDropdown" class="dropdown-content"> <a href="#">Link 1</a> <a href="#">Link 2</a> <a href="#">Link 3</a> </div> </div>  </section> </div> <div class="container p-3"> <section class="row pl-3"> <p class="index-titulos">Created Plans</p> </section> <section class="row" style="align-items: center;"> <div class="col-3"> <div class="add-event">+</div> </div> <div id="carouselExampleIndicators1" class="carousel slide col-8 m-auto" data-interval="false"> <ol class="carousel-indicators" style="bottom: -6vh;">'+indicators+'</ol> <div class="carousel-inner"> '+eventosCriados+' </div> <a class="carousel-control-prev" href="#carouselExampleIndicators1" role="button" data-slide="prev" style="left: -2vw"> <span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="sr-only">Previous</span> </a> <a class="carousel-control-next" href="#carouselExampleIndicators1" role="button" data-slide="next" style="right: -2vw"> <span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="sr-only">Next</span> </a> </div> </section> </div> <div class="container p-3"><section class="row pl-3"> <p class="index-titulos col-6 p-0">Planos Futuros</p> <p class="index-titulos text-right col-6 " style="font-size:small;"><a data-toggle="modal" data-target="#mostarPlanos">Ver todos</a></p> </section><section class="row">'+upcoming+'</section> </div> <div class="container p-3"> <section class="row pl-3"> <p class="index-titulos col-6 p-0">Meus Amigos</p> <p class="index-titulos text-right col-6 " style="font-size:small;"><a data-toggle="modal" data-target="#mostarAmigos">Ver todos</a></p> </section> <section class="row" style="align-items: center;"> <div class="col-3"> <div class="add-event">+</div> </div> <div class="col-9 row p-0">'+cardsAmigos+'</div> </section> </div></main>'

           
            $('#conteudoPagina').append(home);
            $('#amigosBody').append(listaAmigos);
            $('#upcomingPlans').append(listaPlanos);

        })
    }

</script>









<!-- Modal -->
<div class="modal fade" id="mostarAmigos" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Amigos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div id="amigosBody"class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



<!-- Modal -->
<div class="modal fade" id="mostarPlanos" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Planos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div id="upcomingPlans" class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>